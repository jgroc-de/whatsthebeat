<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>What's the B**t?</title>
	<meta name="whatstheb**t" content="beat-taking-pwa">
	<link rel="icon" href="/ICONS/favicon.ico" type="image/x-icon" />
	<link rel="stylesheet" href="./CSS/main.css">
	<script type="module" src="./SRC/app.js" async></script>
	<link rel="manifest" href="/manifest.json">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="apple-mobile-web-app-title" content="What's the B**t?">
	<link rel="apple-touch-icon" href="/ICONS/icon-152x152.png">
	<meta name="description" content="Take the beat of any music">
	<meta name="theme-color" content="#2F3BA2" />
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <meta name="google-site-verification" content="1xd_uLeJAKoJJ3LACLEQ2Vn6yiNmJzOeU2utXZDBFG4"/>
</head>

<body>
	<header>
		<div id="burger">
			<div class="gg-bar"></div>
			<div class="gg-bar"></div>
			<div class="gg-bar"></div>
		</div>
		<div><h1>What's the b**t?</h1></div>
	</header>

	<nav hidden>
		<div class="gg-navbar">
			<h2><b>What's The B**t?</b></h2>
			<a href="/#">What's the beat</a>
		</div>
		<div class="gg-modal"></div>
	</nav>

	<main></main>

	<footer>
		<hr>
		<span>version: <span id="version"></span></span>
		<a href="https://jgroc-de.github.io/" class="gg-pad-right">
			<em>Â© jgroc-de 2019</em>
		</a>
	</footer>

	<template route home id="#wtb">
		<div>
			<form class="gg-3-rows">
				<div></div>
				<tempo-input></tempo-input>
			</form>
		</div>
		<div class="gg-2-cols">
			<div id="actions" class="gg-2-rows">
				<button-reset></button-reset>
			</div>
			<button-start></button-start>
		</div>
	</template>

	<template route id="#metronome">
		<div>
			<form class="gg-4-rows">
				<note-select></note-select>
				<octave-input></octave-input>
				<pitch-input></pitch-input>
				<tempo-input></tempo-input>
			</form>
		</div>
		<div class="gg-2-cols">
			<div id="actions" class="gg-3-rows">
				<button-random></button-random>
				<button-mute></button-mute>
				<button-reset></button-reset>
			</div>
			<button-start></button-start>
		</div>
	</template>

	<template route id="#tuner">
		<div>
			<form class="gg-4-rows">
				<note-select></note-select>
				<octave-input></octave-input>
				<pitch-input></pitch-input>
				<wave-select></wave-select>
			</form>
		</div>
		<div class="gg-2-cols">
			<div id="actions" class="gg-3-rows">
				<button-random></button-random>
				<button-mute></button-mute>
				<button-reset></button-reset>
			</div>
			<button-start></button-start>
		</div>
	</template>
	<template route id="#config">
		<div>
			<form class="gg-4-rows">
				<octave-input></octave-input>
				<pitch-input></pitch-input>
				<tempo-input></tempo-input>
				<repeat-input></repeat-input>
			</form>
		</div>
		<div>
			<form class="gg-4-rows">
				<note-select></note-select>
				<gamme-select></gamme-select>
				<mode-select></mode-select>
				<wave-select></wave-select>
			</form>
		</div>
	</template>

	<template route id="#about">
		<div class="gg-pad">
			<span>
				Welcome on this webApp!<br>
				<br>You can find here some very basic music tools as something to give you the current beat you are
				tapping, a metronome and a sound emitter to help you to tune you instrument.
				<br>If ever you would like to discuss about this work, click <a href="https://jgroc-de.github.io/">here
					to access my github page</a><br><br>Enjoy!
			</span>
		</div>
	</template>

	<template id="noteSelect">
		<label for="note"><span>Note: </span><span></span></label>
		<div class="gg-3-cols">
			<div class="gg-range-div">-</div>
			<select name="note" id="note">
				<option>A</option>
				<option>A#</option>
				<option>B</option>
				<option>C</option>
				<option>C#</option>
				<option>D</option>
				<option>D#</option>
				<option>E</option>
				<option>F</option>
				<option>F#</option>
				<option>G</option>
				<option>G#</option>
			</select>
			<div class="gg-range-div">+</div>
		</div>
	</template>

	<template id="gammeSelect">
		<label for="gamme"><span>Gamme: </span><span></span></label>
		<div class="gg-3-cols">
			<div class="gg-range-div">-</div>
			<select name="gamme" id="gamme">
				<option>A</option>
				<option>A#</option>
				<option>B</option>
				<option>C</option>
				<option>C#</option>
				<option>D</option>
				<option>D#</option>
				<option>E</option>
				<option>F</option>
				<option>F#</option>
				<option>G</option>
				<option>G#</option>
			</select>
			<div class="gg-range-div">+</div>
		</div>
	</template>

	<template id="modeSelect">
		<label for="mode"><span>Mode: </span><span></span></label>
		<div class="gg-3-cols">
			<div class="gg-range-div">-</div>
			<select name="mode" id="mode">
				<option>M</option>
				<option>m</option>
				<option>par ton</option>
				<option>chromatique</option>
			</select>
			<div class="gg-range-div">+</div>
		</div>
	</template>

	<template id="waveSelect">
		<label for="wave"><span>wave: </span><span></span></label>
		<div class="gg-3-cols">
			<div class="gg-range-div">-</div>
			<select name="waveForm" id="waveForm">
				<option>sine</option>
				<option>square</option>
				<option>sawtooth</option>
				<option>triangle</option>
			</select>
			<div class="gg-range-div">+</div>
		</div>
	</template>

	<template id="octaveInput">
		<label for=octave><span>Octave: </span><span></span></label>
		<div class="gg-3-cols">
			<div class="gg-range-div">-</div>
			<input type="range" name="octave" id="octave" min=0 max=7 value=3></input>
			<div class="gg-range-div">+</div>
		</div>
	</template>

	<template id="repeatInput">
		<label for=repeat><span>Repeat: </span><span>times</span></label>
		<div class="gg-3-cols">
			<div class="gg-range-div">-</div>
			<input type="range" name="repeat" id="repeat" min=0 max=12 value=1></input>
			<div class="gg-range-div">+</div>
		</div>
	</template>

	<template id="pitchInput">
		<label for="pitch"><span>Pitch: </span><span></span><span> Hz</span></label>
		<div class="gg-3-cols">
			<div class="gg-range-div">-</div>
			<input type="range" name="pitch" id="pitch" min="350" max="500" value="442"></input>
			<div class="gg-range-div">+</div>
		</div>
	</template>

	<template id="tempoInput">
		<label for="tempo"><span>Tempo: </span><span></span><span> (BPM)</span></label>
		<div class="gg-3-cols">
			<div class="gg-range-div">-</div>
			<input type="range" name="tempo" id="tempo" min="1" max="240" value="60"></input>
			<div class="gg-range-div">+</div>
		</div>
	</template>

	<template id="startButton">
		<button id="start" class="gg-button" aria-label="start"><i class="material-icons gg-font-xl"
				title="start">touch_app</i></button>
	</template>

	<template id="randomButton">
		<button id="random" class="gg-button-m"><i class="material-icons gg-font-l" title='random'>shuffle</i></button>
	</template>

	<template id="resetButton">
		<button id="reset" class="gg-button-m"><i class="material-icons gg-font-l" title='refresh'>
				replay</i></button>
	</template>

	<template id="muteButton">
		<button id="mute" class="gg-button-m"><i class="material-icons gg-font-l" title='mute'>volume_off</i></button>
	</template>


	<script>
		if ('serviceWorker' in navigator) {
/*
			window.addEventListener('load', () => {
				navigator.serviceWorker.register('/service-worker.js').then(worker => {
					//console.log('Service worker registered.', worker)
					navigator.serviceWorker.addEventListener('message', function (event) {
						document.getElementById('version').textContent = event.data
					})
					if (navigator.serviceWorker.controller) {
						navigator.serviceWorker.controller.postMessage('hi')
					}
				})
			})
*/
		}
		class NoteSelect extends HTMLElement {
			constructor() {
				super()
				this.innerHTML = document.querySelector('#noteSelect').innerHTML
			}
		}

		class GammeSelect extends HTMLElement {
			constructor() {
				super()
				this.innerHTML = document.querySelector('#gammeSelect').innerHTML
			}
		}

		class ModeSelect extends HTMLElement {
			constructor() {
				super()
				this.innerHTML = document.querySelector('#modeSelect').innerHTML
			}
		}

		class WaveSelect extends HTMLElement {
			constructor() {
				super()
				this.innerHTML = document.querySelector('#waveSelect').innerHTML
			}
		}

		class OctaveInput extends HTMLElement {
			constructor() {
				super()
				this.innerHTML = document.querySelector('#octaveInput').innerHTML
			}
		}

		class RepeatInput extends HTMLElement {
			constructor() {
				super()
				this.innerHTML = document.querySelector('#repeatInput').innerHTML
			}
		}

		class PitchInput extends HTMLElement {
			constructor() {
				super()
				this.innerHTML = document.querySelector('#pitchInput').innerHTML
			}
		}

		class TempoInput extends HTMLElement {
			constructor() {
				super()
				this.innerHTML = document.querySelector('#tempoInput').innerHTML
			}
		}

		class StartButton extends HTMLElement {
			constructor() {
				super()
				this.innerHTML = document.querySelector('#startButton').innerHTML
				/*if (window.location.hash === '') {
					this.firstElementChild.innerText = 'B**t Me!'
				}*/
			}
		}

		class RandomButton extends HTMLElement {
			constructor() {
				super()
				this.innerHTML = document.querySelector('#randomButton').innerHTML
				switch (window.location.hash) {
					case '#tuner':
						this.firstElementChild.firstElementChild.title = 'random note'
						break
					case '#metronome':
						this.firstElementChild.firstElementChild.title = 'random tempo'
						break
				}
			}
		}

		class ResetButton extends HTMLElement {
			constructor() {
				super()
				this.innerHTML = document.querySelector('#resetButton').innerHTML
			}
		}

		class MuteButton extends HTMLElement {
			constructor() {
				super()
				this.innerHTML = document.querySelector('#muteButton').innerHTML
			}
		}

		window.customElements.define('note-select', NoteSelect)
		window.customElements.define('gamme-select', GammeSelect)
		window.customElements.define('mode-select', ModeSelect)
		window.customElements.define('wave-select', WaveSelect)
		window.customElements.define('octave-input', OctaveInput)
		window.customElements.define('repeat-input', RepeatInput)
		window.customElements.define('pitch-input', PitchInput)
		window.customElements.define('tempo-input', TempoInput)
		window.customElements.define('button-start', StartButton)
		window.customElements.define('button-random', RandomButton)
		window.customElements.define('button-reset', ResetButton)
		window.customElements.define('button-mute', MuteButton)
	</script>
</body>

</html>
